"use strict";(self.webpackChunkFlex=self.webpackChunkFlex||[]).push([[503],{9503:(z,f,c)=>{c.r(f),c.d(f,{UserRoutingModule:()=>W});var d=c(5865),s=c(4341),u=c(1562),p=c(177),e=c(4438);const h=t=>({show:t}),_=t=>({display:t}),b=()=>["/login/signUp"],v=()=>({toSignUp:!0});function y(t,a){if(1&t&&(e.j41(0,"div",24),e.EFF(1),e.k0s()),2&t){const n=e.XpG();e.R7$(),e.SpI(" ",n.successMessage," ")}}function k(t,a){if(1&t&&(e.j41(0,"div",25),e.EFF(1),e.k0s()),2&t){const n=e.XpG();e.R7$(),e.SpI(" ",n.errorMessage," ")}}function F(t,a){1&t&&(e.j41(0,"small"),e.EFF(1,"Username is required"),e.k0s())}function x(t,a){1&t&&(e.j41(0,"small"),e.EFF(1,"Minimum of 4 characters required"),e.k0s())}function C(t,a){if(1&t&&(e.j41(0,"div",26),e.DNE(1,F,2,0,"small",18)(2,x,2,0,"small",18),e.k0s()),2&t){let n,r;const o=e.XpG();e.R7$(),e.Y8G("ngIf",null==(n=o.fg.get("username"))?null:n.hasError("required")),e.R7$(),e.Y8G("ngIf",null==(r=o.fg.get("username"))?null:r.hasError("minlength"))}}function E(t,a){1&t&&(e.j41(0,"small"),e.EFF(1,"Password is required"),e.k0s())}function U(t,a){1&t&&(e.j41(0,"small"),e.EFF(1,"Minimum of 4 characters required"),e.k0s())}function w(t,a){if(1&t&&(e.j41(0,"div",26),e.DNE(1,E,2,0,"small",18)(2,U,2,0,"small",18),e.k0s()),2&t){let n,r;const o=e.XpG();e.R7$(),e.Y8G("ngIf",null==(n=o.fg.get("password"))?null:n.hasError("required")),e.R7$(),e.Y8G("ngIf",null==(r=o.fg.get("password"))?null:r.hasError("minlength"))}}function j(t,a){1&t&&(e.j41(0,"span")(1,"small"),e.EFF(2,"Login"),e.k0s()())}function G(t,a){1&t&&(e.j41(0,"span"),e.nrm(1,"span",27),e.j41(2,"small"),e.EFF(3,"Loading..."),e.k0s()())}let M=(()=>{class t{fb;router;actRoute;http;fg;showLoginForm=!1;isLoading=!1;errorMessage=null;successMessage=null;constructor(n,r,o,i){this.fb=n,this.router=r,this.actRoute=o,this.http=i}ngOnInit(){this.fg=this.fb.group({username:["",[s.k0.required,s.k0.minLength(4)]],password:["",[s.k0.required,s.k0.minLength(4)]]}),this.actRoute.queryParams.subscribe(n=>{this.showLoginForm="true"==n.toLogin})}onLogin(){this.fg.invalid?this.fg.markAllAsTouched():(this.isLoading=!0,this.errorMessage=null,this.successMessage=null,console.log("Attempting login with:",this.fg.value),this.http.post("http://localhost:8080/api/cars/verifyUser",this.fg.value,{headers:new u.Lr({"Content-Type":"application/json",Accept:"application/json"}),withCredentials:!0}).subscribe({next:n=>{if(console.log("Login response:",n),!n?.token)throw new Error("No token received in response");{const r=n.token;if(!r.startsWith("eyJ"))throw new Error("Malformed JWT token received");localStorage.setItem("jwtToken",r),this.successMessage="You logged in successfully!",setTimeout(()=>{this.router.navigate(["/home"])},2e3)}},error:n=>{console.error("Login failed:",n),this.handleError(n)},complete:()=>{this.isLoading=!1}}))}handleError(n){if(n instanceof u.yz){console.error("HTTP Error:",n.status,n.statusText);const r=n.error?.message||n.error?.error;switch(n.status){case 0:this.errorMessage="Network error - cannot connect to server";break;case 400:this.errorMessage=r||"Invalid request format";break;case 401:this.errorMessage=r||"Invalid username or password";break;case 403:this.errorMessage=r||"Access denied";break;case 404:this.errorMessage="API endpoint not found";break;case 500:this.errorMessage=r||"Internal server error";break;default:this.errorMessage=`Unexpected error (${n.status})`}}else this.errorMessage=n.message||"An unknown error occurred"}navigateToHome(){this.router.navigate(["/home"])}static \u0275fac=function(r){return new(r||t)(e.rXU(s.ok),e.rXU(d.Ix),e.rXU(d.nX),e.rXU(u.Qq))};static \u0275cmp=e.VBU({type:t,selectors:[["app-login"]],standalone:!0,features:[e.aNF],decls:34,vars:19,consts:[["data-bs-backdrop","static",1,"modal","opacity-100","fade","modal-background",3,"ngClass","ngStyle"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content",2,"border-radius","20px"],[1,"modal-header","border-bottom","border-dark"],[1,"text-light","text-center",2,"text-align","center"],[1,"modal-body","text-light",3,"formGroup"],["class","alert alert-success",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[1,"row","form-group"],["for","username",1,"form-label"],["type","text","formControlName","username","placeholder","Enter your username",1,"form-control","bg-secondary","border-secondary","text-dark","ms-2"],["class","text-danger",4,"ngIf"],[1,"row","mt-3","form-group"],["for","Password",1,"form-label","text-light"],["type","password","placeholder","Enter your password","formControlName","password",1,"form-control","bg-secondary","border-secondary","text-dark","ms-2"],[1,"row","mt-3"],[1,"col-2"],[1,"btn","btn-success",3,"click","disabled"],[4,"ngIf"],[1,"col-2","ms-auto","me-3"],["data-bs-dismiss","modal","type","button",1,"btn","btn-danger",3,"click","disabled"],[1,"modal-footer","border-top","border-secondary"],[1,"text-light","me-auto"],["href","","routerLinkActive","active",1,"text-success","text-decoration-none",2,"font-size","18px",3,"routerLink","queryParams"],[1,"alert","alert-success"],[1,"alert","alert-danger"],[1,"text-danger"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(r,o){if(1&r&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),e.EFF(5," Welcome back to CarFlex "),e.k0s()(),e.j41(6,"div",5),e.DNE(7,y,2,1,"div",6)(8,k,2,1,"div",7),e.j41(9,"div",8)(10,"label",9),e.EFF(11,"Username"),e.k0s(),e.nrm(12,"input",10),e.k0s(),e.DNE(13,C,3,2,"div",11),e.j41(14,"div",12)(15,"label",13),e.EFF(16,"Password"),e.k0s(),e.nrm(17,"input",14),e.k0s(),e.DNE(18,w,3,2,"div",11),e.j41(19,"div",15)(20,"div",16)(21,"button",17),e.bIt("click",function(){return o.onLogin()}),e.DNE(22,j,3,0,"span",18)(23,G,4,0,"span",18),e.k0s()(),e.j41(24,"div",19)(25,"button",20),e.bIt("click",function(){return o.navigateToHome()}),e.j41(26,"small"),e.EFF(27,"Cancel"),e.k0s()()()()(),e.j41(28,"div",21)(29,"p",22),e.EFF(30,"Don't have an account ? "),e.j41(31,"a",23),e.EFF(32,"click here"),e.k0s(),e.EFF(33," to signUp"),e.k0s()()()()()),2&r){let i,l;e.Y8G("ngClass",e.eq3(13,h,o.showLoginForm))("ngStyle",e.eq3(15,_,o.showLoginForm?"block":"none")),e.R7$(6),e.Y8G("formGroup",o.fg),e.R7$(),e.Y8G("ngIf",o.successMessage),e.R7$(),e.Y8G("ngIf",o.errorMessage),e.R7$(5),e.Y8G("ngIf",(null==(i=o.fg.get("username"))?null:i.touched)&&(null==(i=o.fg.get("username"))?null:i.invalid)),e.R7$(5),e.Y8G("ngIf",(null==(l=o.fg.get("password"))?null:l.touched)&&(null==(l=o.fg.get("password"))?null:l.invalid)),e.R7$(3),e.Y8G("disabled",o.isLoading),e.R7$(),e.Y8G("ngIf",!o.isLoading),e.R7$(),e.Y8G("ngIf",o.isLoading),e.R7$(2),e.Y8G("disabled",o.isLoading),e.R7$(6),e.Y8G("routerLink",e.lJ4(17,b))("queryParams",e.lJ4(18,v))}},dependencies:[p.bT,p.YU,p.B3,d.Wk,d.wQ,s.X1,s.me,s.BC,s.cb,s.j4,s.JD],styles:[".form-control[_ngcontent-%COMP%]{width:70%}.modal-content[_ngcontent-%COMP%]{border-radius:20px;background-color:#041e42}.modal[_ngcontent-%COMP%]{background-image:radial-gradient(circle,#72a0c1,#3b5b74,#556c7d);height:100vh;width:100%;margin:auto}"]})}return t})(),I=(()=>{class t{http;constructor(n){this.http=n}url="http://localhost:8080/api/cars";createUser(n){return this.http.post(`${this.url}/addUser`,n,{headers:new u.Lr({"Content-Type":"application/json"})})}static \u0275fac=function(r){return new(r||t)(e.KVO(u.Qq))};static \u0275prov=e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const P=t=>({show:t}),L=t=>({display:t});function T(t,a){1&t&&(e.j41(0,"small"),e.EFF(1,"Username is required"),e.k0s())}function N(t,a){1&t&&(e.j41(0,"small"),e.EFF(1,"Minimum of 3 characters required"),e.k0s())}function R(t,a){if(1&t&&(e.j41(0,"div",23),e.DNE(1,T,2,0,"small",24)(2,N,2,0,"small",24),e.k0s()),2&t){let n,r;const o=e.XpG();e.R7$(),e.Y8G("ngIf",null==(n=o.signUp.get("username"))?null:n.hasError("required")),e.R7$(),e.Y8G("ngIf",null==(r=o.signUp.get("username"))?null:r.hasError("minlength"))}}function S(t,a){1&t&&(e.j41(0,"small"),e.EFF(1,"Password is required"),e.k0s())}function Y(t,a){1&t&&(e.j41(0,"small"),e.EFF(1,"Minimum of 3 characters required"),e.k0s())}function $(t,a){if(1&t&&(e.j41(0,"div",23),e.DNE(1,S,2,0,"small",24)(2,Y,2,0,"small",24),e.k0s()),2&t){let n,r;const o=e.XpG();e.R7$(),e.Y8G("ngIf",null==(n=o.signUp.get("password"))?null:n.hasError("required")),e.R7$(),e.Y8G("ngIf",null==(r=o.signUp.get("password"))?null:r.hasError("minlength"))}}function D(t,a){1&t&&(e.j41(0,"small"),e.EFF(1,"Phone number is required"),e.k0s())}function q(t,a){1&t&&(e.j41(0,"small"),e.EFF(1,"Phone number must have 10 digits only"),e.k0s())}function X(t,a){if(1&t&&(e.j41(0,"div",23),e.DNE(1,D,2,0,"small",24)(2,q,2,0,"small",24),e.k0s()),2&t){let n,r;const o=e.XpG();e.R7$(),e.Y8G("ngIf",null==(n=o.signUp.get("pNumber"))?null:n.hasError("required")),e.R7$(),e.Y8G("ngIf",null==(r=o.signUp.get("pNumber"))?null:r.hasError("invalidPhoneNumber"))}}function O(t,a){1&t&&(e.j41(0,"small"),e.EFF(1,"Enter a valid Gmail address"),e.k0s())}function V(t,a){if(1&t&&(e.j41(0,"div",23),e.DNE(1,O,2,0,"small",24),e.k0s()),2&t){let n;const r=e.XpG();e.R7$(),e.Y8G("ngIf",null==(n=r.signUp.get("signGmail"))?null:n.hasError("invalidGmail"))}}function B(t,a){if(1&t){const n=e.RV6();e.j41(0,"div",25),e.EFF(1),e.j41(2,"a",26),e.bIt("click",function(){e.eBV(n);const o=e.XpG();return e.Njj(o.navigateToLoginComponent())}),e.EFF(3,"Login"),e.k0s()()}if(2&t){const n=e.XpG();e.R7$(),e.SpI(" ",n.successMessage," -> Please ")}}const A=[{path:"",component:M,runGuardsAndResolvers:"paramsChange"},{path:"signUp",component:(()=>{class t{fb;aRoute;router;userService;signUp;showSignUp=!1;successMessage="";constructor(n,r,o,i){this.fb=n,this.aRoute=r,this.router=o,this.userService=i}ngOnInit(){this.signUp=this.fb.group({username:["",[s.k0.required,s.k0.minLength(3)]],password:["",[s.k0.required,s.k0.minLength(3)]],pNumber:["",[s.k0.required,this.phoneNumberValidator()]],signGmail:["",[s.k0.required,s.k0.email,this.gmailValidator()]]}),this.aRoute.queryParams.subscribe(n=>{this.showSignUp="true"===n.toSignUp})}phoneNumberValidator(){return n=>/^[0-9]{10}$/.test(n.value)?null:{invalidPhoneNumber:!0}}gmailValidator(){return n=>/^[a-zA-Z0-9._%+-]+@gmail\.com$/.test(n.value)?null:{invalidGmail:!0}}onSubmit(){this.signUp.valid&&this.userService.createUser(this.signUp.value).subscribe({next:r=>{console.log("User created successfully:",r),this.successMessage="User registered successfully!",this.signUp.reset(),this.showSignUp=!0},error:r=>{console.error("Error creating user:",r),this.successMessage="Failed to register user. Please try again."}})}navigateToLogin(){this.router.navigate(["/login"],{queryParams:{toLogin:!0}})}navigateToLoginComponent(){this.router.navigate(["/login"],{queryParams:{toLogin:!0}})}static \u0275fac=function(r){return new(r||t)(e.rXU(s.ok),e.rXU(d.nX),e.rXU(d.Ix),e.rXU(I))};static \u0275cmp=e.VBU({type:t,selectors:[["app-sign-up"]],standalone:!0,features:[e.aNF],decls:37,vars:13,consts:[[1,"modal","loginModalBackground",3,"ngClass","ngStyle"],[1,"modal-dialog","modal-dialog-centered","modal-lg"],[1,"modal-content","modalBorder"],[1,"modal-header","row","border-bottom","w-100","border-secondary",2,"text-align","center"],[1,"col-11","text-light",2,"text-align","center"],["href","",1,"col-1","text-decoration-none",2,"color","red","font-size","50px",3,"click"],[3,"ngSubmit","formGroup"],[1,"modal-body","text-light",3,"formGroup"],[1,"row","form-group"],[1,"col-lg-6"],["for","username","type","text",1,"form-label","ms-2"],["type","text","formControlName","username","placeholder","Enter Your required User Name",1,"form-control","inputWidth","bg-secondary","border-secondary","text-dark","ms-2"],["class","text-danger ms-2",4,"ngIf"],["for","password","type","Password",1,"form-label","ms-2"],["type","password","formControlName","password","placeholder","Enter Password",1,"form-control","inputWidth","bg-secondary","border-secondary","text-dark","ms-2"],[1,"row","form-group","mt-4"],["for","pNumber","type","text",1,"form-label","col-6","ms-2"],["type","number","formControlName","pNumber","placeholder","Enter Your Phone Number",1,"col-6","form-control","inputWidth","bg-secondary","border-secondary","text-dark","ms-2"],["for","signGmail","type","text",1,"form-label","col-6","ms-2"],["type","gmail","formControlName","signGmail","placeholder","Enter Your Gmail",1,"col-6","form-control","inputWidth","bg-secondary","border-secondary","text-dark","ms-2"],[1,"text-center","mt-5"],["type","submit",1,"btn","btn-success"],["class","text-center mt-3 text-success",4,"ngIf"],[1,"text-danger","ms-2"],[4,"ngIf"],[1,"text-center","mt-3","text-success"],[1,"text-danger","login","text-decoration-none",3,"click"]],template:function(r,o){if(1&r&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),e.EFF(5," Create your Carflex account "),e.k0s(),e.j41(6,"a",5),e.bIt("click",function(){return o.navigateToLogin()}),e.EFF(7,"\xd7"),e.k0s()(),e.j41(8,"form",6),e.bIt("ngSubmit",function(){return o.onSubmit()}),e.j41(9,"div",7)(10,"div",8)(11,"div",9)(12,"label",10),e.EFF(13,"User Name"),e.k0s(),e.nrm(14,"input",11),e.DNE(15,R,3,2,"div",12),e.k0s(),e.j41(16,"div",9)(17,"label",13),e.EFF(18,"Password"),e.k0s(),e.nrm(19,"input",14),e.DNE(20,$,3,2,"div",12),e.k0s()(),e.j41(21,"div",15)(22,"div",9)(23,"label",16),e.EFF(24,"Mobile Number"),e.k0s(),e.nrm(25,"input",17),e.DNE(26,X,3,2,"div",12),e.k0s(),e.j41(27,"div",9)(28,"label",18),e.EFF(29,"Gmail"),e.k0s(),e.nrm(30,"input",19),e.DNE(31,V,2,1,"div",12),e.k0s()(),e.j41(32,"div",20)(33,"button",21)(34,"small"),e.EFF(35,"SignUp"),e.k0s()()(),e.DNE(36,B,4,1,"div",22),e.k0s()()()()()),2&r){let i,l,m,g;e.Y8G("ngClass",e.eq3(9,P,o.showSignUp))("ngStyle",e.eq3(11,L,o.showSignUp?"block":"none")),e.R7$(8),e.Y8G("formGroup",o.signUp),e.R7$(),e.Y8G("formGroup",o.signUp),e.R7$(6),e.Y8G("ngIf",(null==(i=o.signUp.get("username"))?null:i.touched)&&(null==(i=o.signUp.get("username"))?null:i.invalid)),e.R7$(5),e.Y8G("ngIf",(null==(l=o.signUp.get("password"))?null:l.touched)&&(null==(l=o.signUp.get("password"))?null:l.invalid)),e.R7$(6),e.Y8G("ngIf",(null==(m=o.signUp.get("pNumber"))?null:m.touched)&&(null==(m=o.signUp.get("pNumber"))?null:m.invalid)),e.R7$(5),e.Y8G("ngIf",(null==(g=o.signUp.get("signGmail"))?null:g.touched)&&(null==(g=o.signUp.get("signGmail"))?null:g.invalid)),e.R7$(5),e.Y8G("ngIf",o.successMessage)}},dependencies:[p.YU,p.bT,p.B3,s.X1,s.qT,s.me,s.Q0,s.BC,s.cb,s.j4,s.JD],styles:[".form-control[_ngcontent-%COMP%]{width:75%}.modal-content[_ngcontent-%COMP%]{border-radius:20px;width:100%;max-width:800px;background-color:#041e42;margin:0 auto}.modal[_ngcontent-%COMP%]{background-image:radial-gradient(circle,#72a0c1,#3b5b74,#556c7d);height:100vh;width:100vw;margin:0;padding:0;display:flex;align-items:center;justify-content:center}.login[_ngcontent-%COMP%]:hover{cursor:pointer}"]})}return t})()},{path:"payment",component:(()=>{class t{actRoute;constructor(n){this.actRoute=n}onPaymentMethodChange(n){["upiDetails","creditCardDetails","paypalDetails"].forEach(l=>{const m=document.getElementById(l);m&&(m.style.display="none")});const i=document.getElementById(n.target.value+"Details");i&&(i.style.display="block")}static \u0275fac=function(r){return new(r||t)(e.rXU(d.nX))};static \u0275cmp=e.VBU({type:t,selectors:[["app-payment"]],standalone:!0,features:[e.aNF],decls:37,vars:0,consts:[[1,"payment-container",2,"margin-top","100px"],[1,"text-center","header",2,"font-size","20px"],[1,"payment-card"],[1,"payment-option"],["type","radio","id","upi","name","paymentMethod","value","upi"],["for","upi"],["id","upiDetails",1,"payment-details",2,"display","none"],["for","upiId",1,"form-label"],["type","text","id","upiId","placeholder","example@upi",1,"form-control"],["type","radio","id","creditCard","name","paymentMethod","value","creditCard"],["for","creditCard"],["id","creditCardDetails",1,"payment-details",2,"display","none"],["for","cardNumber",1,"form-label"],["type","text","id","cardNumber","placeholder","1234 5678 9012 3456",1,"form-control"],["for","expiryDate",1,"form-label","mt-3"],["type","text","id","expiryDate","placeholder","MM/YY",1,"form-control"],["for","cvv",1,"form-label","mt-3"],["type","password","id","cvv","placeholder","123",1,"form-control"],["type","radio","id","paypal","name","paymentMethod","value","paypal"],["for","paypal"],["id","paypalDetails",1,"payment-details",2,"display","none"],[1,"text-center"],["type","submit",1,"btn","btn-primary","mt-4",2,"width","200px","text-align","center"]],template:function(r,o){1&r&&(e.j41(0,"div",0)(1,"h2",1),e.EFF(2,"Select Your Payment Method"),e.k0s(),e.j41(3,"div",2)(4,"form")(5,"div",3),e.nrm(6,"input",4),e.j41(7,"label",5),e.EFF(8,"UPI Payment"),e.k0s(),e.j41(9,"div",6)(10,"label",7),e.EFF(11,"Enter UPI ID"),e.k0s(),e.nrm(12,"input",8),e.k0s()(),e.j41(13,"div",3),e.nrm(14,"input",9),e.j41(15,"label",10),e.EFF(16,"Credit Card"),e.k0s(),e.j41(17,"div",11)(18,"label",12),e.EFF(19,"Card Number"),e.k0s(),e.nrm(20,"input",13),e.j41(21,"label",14),e.EFF(22,"Expiry Date"),e.k0s(),e.nrm(23,"input",15),e.j41(24,"label",16),e.EFF(25,"CVV"),e.k0s(),e.nrm(26,"input",17),e.k0s()(),e.j41(27,"div",3),e.nrm(28,"input",18),e.j41(29,"label",19),e.EFF(30,"PayPal"),e.k0s(),e.j41(31,"div",20)(32,"p"),e.EFF(33,"You'll be redirected to PayPal to complete your payment."),e.k0s()()(),e.j41(34,"div",21)(35,"button",22),e.EFF(36,"Proceed to Pay"),e.k0s()()()()())},styles:[".payment-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;padding:20px;border-radius:10px;box-shadow:0 4px 8px #0000001a;background-color:#041e42}.payment-card[_ngcontent-%COMP%]{padding:20px;background-color:#e5e4e2;border-radius:10px;box-shadow:0 2px 4px #0000001a}.payment-option[_ngcontent-%COMP%]{margin-bottom:15px}.payment-option[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;margin-left:10px}.payment-details[_ngcontent-%COMP%]{margin-top:10px;padding-left:25px}.form-label[_ngcontent-%COMP%]{font-weight:700}.form-control[_ngcontent-%COMP%]{width:100%;padding:10px;margin-top:5px;border:1px solid #ccc;border-radius:5px}.btn[_ngcontent-%COMP%]{width:100%;padding:10px;font-size:16px;border-radius:5px}.header[_ngcontent-%COMP%]{color:#fff}"]})}return t})()}];let W=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=e.$C({type:t});static \u0275inj=e.G2t({imports:[d.iI.forChild(A),d.iI]})}return t})()}}]);